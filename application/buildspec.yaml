
---
version: 0.2
phases:
    install:
        runtime-versions:
            python: 3.7
    build:
        commands:
          - cd $CODEBUILD_SRC_DIR
          - echo "Starting build `date` in `pwd`"
          - pip install -r application/lambda/auth/requirements.pip -t application/lambda/auth/
          - aws cloudformation package
                --s3-bucket=${BUILD_OUTPUT_BUCKET}
                --s3-prefix=${BUILD_OUTPUT_PREFIX}
                --template-file=application/template.yaml
                --output-template-file=application/packaged.yaml
artifacts:
    base-directory: ./application
    files:
      - packaged.yaml